<html>
<body>
    <canvas id="canvas"></canvas>
    <div>
      <button onclick="myFunction()">Click me</button>
            <!-- <a href="#" class="button" id="btn-download" download="my-file-name.png">Download</a> -->

    </div>
    <div>
      <img id="image" src="" width="640px" height="480px" crossorigin="anonymous">
    </div> 
</body>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="jsmpeg.min.js"></script>
<script type="text/javascript">
  
    $image = $("#image");
    var video = $('#canvas').get(0)
 
    player = new JSMpeg.Player('ws://192.168.100.153:9999', {
      canvas: document.getElementById('canvas'), // Canvas should be a canvas DOM element
      preserveDrawingBuffer: true
    })	 
    function myFunction() {
      var img = document.createElement("img");
      var imgg = document.getElementById("image");
      imgg.setAttribute('crossorigin', 'annonymous');
      imgg.src = player.renderer.canvas.toDataURL('image/jpeg', 0.7); 
    }
    //var jpg = player.canvas.toDataURL('image/jpeg', 0.7);

</script>
</html>
